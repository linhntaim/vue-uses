{"version":3,"sources":["../../../../../src/uses/router/middleware/modules/app-middleware.js"],"names":["AppMiddleware","htmlInitializingId","initializing","htmlInitializingCId","log","runBefore","removeInitializing","bus","emit","runAfter","next","e","document","getElementById","remove","parentNode","removeChild","Middleware"],"mappings":"2aAAA,yC,2wEAEaA,CAAAA,a,gHACT,wBAAqD,cAAzCC,CAAAA,kBAAyC,2DAApB,kBAAoB,qCACjD,wBAEA,MAAKC,YAAL,CAAoB,IAApB,CACA,MAAKC,mBAAL,CAA2BF,kBAA3B,CAJiD,YAKpD,C,gDAED,iBAAS,CACL,KAAKG,GAAL,CAAS,KAAT,CAAgB,YAAhB,EAEA,GAAI,KAAKC,SAAL,EAAJ,CAAsB,CAClB,KAAKC,kBAAL,GAEA,KAAKC,GAAL,GAAWC,IAAX,CAAgB,cAAhB,CACH,CAJD,IAIO,IAAI,KAAKC,QAAL,EAAJ,CAAqB,CACxB,KAAKF,GAAL,GAAWC,IAAX,CAAgB,aAAhB,CACH,CAED,KAAKE,IAAL,EACH,C,kCAED,6BAAqB,CACjB,GAAI,KAAKR,YAAT,CAAuB,CACnB,KAAKA,YAAL,CAAoB,KAApB,CAEA,GAAMS,CAAAA,CAAC,CAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKV,mBAA7B,CAAV,CACA,GAAIQ,CAAJ,CAAO,MAAOA,CAAAA,CAAC,CAACG,MAAT,GAAoB,UAApB,CAAiCH,CAAC,CAACG,MAAF,EAAjC,CAA8CH,CAAC,CAACI,UAAF,CAAaC,WAAb,CAAyBL,CAAzB,CACxD,CACJ,C,0BA7B8BM,sB","sourcesContent":["import {Middleware} from '../middleware'\r\n\r\nexport class AppMiddleware extends Middleware {\r\n    constructor(htmlInitializingId = 'app-initializing') {\r\n        super()\r\n\r\n        this.initializing = true\r\n        this.htmlInitializingCId = htmlInitializingId\r\n    }\r\n\r\n    handle() {\r\n        this.log('app', 'middleware')\r\n\r\n        if (this.runBefore()) {\r\n            this.removeInitializing()\r\n\r\n            this.bus().emit('page.loading')\r\n        } else if (this.runAfter()) {\r\n            this.bus().emit('page.loaded')\r\n        }\r\n\r\n        this.next()\r\n    }\r\n\r\n    removeInitializing() {\r\n        if (this.initializing) {\r\n            this.initializing = false\r\n\r\n            const e = document.getElementById(this.htmlInitializingCId)\r\n            if (e) typeof e.remove === 'function' ? e.remove() : e.parentNode.removeChild(e)\r\n        }\r\n    }\r\n}\r\n"],"file":"app-middleware.js"}